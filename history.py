# history.py - –º–æ–¥—É–ª—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
history = []

def add_to_history(operation, a, b, result):
    """
    –î–æ–±–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –≤ –∏—Å—Ç–æ—Ä–∏—é –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    
    Args:
        operation (str): —Å–∏–º–≤–æ–ª –æ–ø–µ—Ä–∞—Ü–∏–∏ (+, -, *, /, **)
        a (float): –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ
        b (float): –≤—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ  
        result (float): —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
    """
    history_entry = {
        'operation': operation,
        'a': a,
        'b': b,
        'result': result
    }
    history.append(history_entry)
    print(f"‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é: {a} {operation} {b} = {result}")

def show_history():
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π"""
    if not history:
        print("üìù –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø—É—Å—Ç–∞")
        return
    
    print("\nüìã –ò–°–¢–û–†–ò–Ø –û–ü–ï–†–ê–¶–ò–ô:")
    print("-" * 40)
    for i, entry in enumerate(history, 1):
        print(f"{i}. {entry['a']} {entry['operation']} {entry['b']} = {entry['result']}")
    print("-" * 40)

def clear_history():
    """–û—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π"""
    history.clear()
    print("üóëÔ∏è –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –æ—á–∏—â–µ–Ω–∞")

def get_history_count():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏"""
    return len(history)

def get_last_operation():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –æ–ø–µ—Ä–∞—Ü–∏—é –∏–ª–∏ None –µ—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞"""
    if not history:
        return None
    return history[-1]

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è
if __name__ == "__main__":
    print("üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –∏—Å—Ç–æ—Ä–∏–∏...")
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    add_to_history('+', 5, 3, 8)
    add_to_history('*', 2, 4, 8)
    add_to_history('/', 10, 2, 5)
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
    show_history()
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π
    print(f"–í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: {get_history_count()}")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –æ–ø–µ—Ä–∞—Ü–∏—é
    last_op = get_last_operation()
    if last_op:
        print(f"–ü–æ—Å–ª–µ–¥–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏—è: {last_op['a']} {last_op['operation']} {last_op['b']} = {last_op['result']}")
    
    # –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
    clear_history()
    show_history()
